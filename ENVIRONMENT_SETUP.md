# üîß Environment Variables Setup Guide

## üìç **Local Development Setup**

### 1. Create Backend .env File

Create a file `backend/.env` with these variables:

```env
# ====================================
# RSSB Platform - Local Development
# ====================================

# Database (Local PostgreSQL)
DATABASE_URL="postgresql://your_username:your_password@localhost:5432/rssb_local"

# JWT Secret (32+ characters)
JWT_SECRET="rssb-spiritual-platform-jwt-secret-key-2024-radha-soami-satsang-beas"

# Gmail SMTP Configuration
EMAIL_HOST="smtp.gmail.com"
EMAIL_PORT=587
EMAIL_USER="rssbsearch@gmail.com"
EMAIL_PASS="your-gmail-app-password"

# Application Settings
NODE_ENV="development"
PORT=5001
FRONTEND_URL="http://localhost:3000"
```

### 2. Gmail App Password Setup (Required)

1. **Enable 2-Factor Authentication:**

   - Go to [Google Account Settings](https://myaccount.google.com/)
   - Security ‚Üí 2-Step Verification ‚Üí Turn On

2. **Generate App Password:**
   - Security ‚Üí App passwords
   - Select app: "Mail"
   - Generate 16-character password
   - Use this as `EMAIL_PASS`

---

## üöÄ **Railway Production Setup**

### 1. Railway Environment Variables

In your Railway project dashboard, set these variables:

```env
# ====================================
# RSSB Platform - Railway Production
# ====================================

# Database (Railway auto-generates this)
DATABASE_URL=postgresql://postgres:password@host:port/railway
# ‚Üë Railway will automatically provide this when you add PostgreSQL service

# JWT Secret (IMPORTANT: Use a strong secret)
JWT_SECRET=rssb-production-jwt-secret-2024-super-secure-radha-soami-spiritual-platform-key

# Gmail SMTP (Same as local)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=rssbsearch@gmail.com
EMAIL_PASS=your-gmail-app-password-16-characters

# Application Environment
NODE_ENV=production
PORT=$PORT
# ‚Üë Railway automatically sets $PORT, don't change this

# Frontend URL (Railway will auto-generate your domain)
FRONTEND_URL=https://your-app-name.up.railway.app
# ‚Üë Replace with your actual Railway domain
```

### 2. Required Railway Services

- ‚úÖ **Web Service** (your app) - Auto-detected
- ‚úÖ **PostgreSQL Database** - Add manually

---

## üìß **Gmail SMTP Configuration Steps**

### Step 1: Enable 2-Factor Authentication

1. Go to [Google Account](https://myaccount.google.com/)
2. Click **Security** in left sidebar
3. Find **2-Step Verification**
4. Click **Get Started** and follow prompts

### Step 2: Generate App Password

1. Go back to **Security** section
2. Find **App passwords** (only visible after 2FA is enabled)
3. Select app: **Mail**
4. Select device: **Other** ‚Üí Type: "RSSB Platform"
5. Copy the **16-character password**
6. Use this as your `EMAIL_PASS`

**Example App Password:** `abcd efgh ijkl mnop`
**Use in .env as:** `EMAIL_PASS="abcdefghijklmnop"` (no spaces)

---

## üîó **Railway Deployment Steps**

### 1. Create Railway Account

- Go to [railway.app](https://railway.app)
- Sign up with your GitHub account

### 2. Deploy Your Repository

1. Click **"New Project"**
2. Select **"Deploy from GitHub repo"**
3. Choose **`Vaibhav0126/RSSB`**
4. Railway automatically deploys!

### 3. Add PostgreSQL Database

1. In project dashboard, click **"Add Service"**
2. Choose **"Database"** ‚Üí **"PostgreSQL"**
3. Railway auto-configures `DATABASE_URL`

### 4. Set Environment Variables

1. Click on your **web service**
2. Go to **"Variables"** tab
3. Add all the production variables listed above

### 5. Get Your Live URL

- Railway will provide: `https://your-app-name.up.railway.app`
- Update `FRONTEND_URL` variable with this URL

---

## ‚ö†Ô∏è **Important Security Notes**

### JWT Secret Requirements:

- **Minimum 32 characters**
- **Use different secrets** for development and production
- **Never commit secrets** to GitHub

### Email Security:

- **Never use your regular Gmail password**
- **Only use App Passwords** generated by Google
- **Keep App Passwords secure** - treat like regular passwords

### Database Security:

- **Railway auto-secures** your PostgreSQL connection
- **Never expose DATABASE_URL** publicly

---

## üß™ **Testing Your Setup**

### Local Development Test:

```bash
# Start your backend
cd backend
npm run dev

# Should see:
# "Connected to PostgreSQL database"
# "Server running on port 5001"
```

### Production Test:

1. Deploy to Railway
2. Check logs for successful database connection
3. Test OTP email functionality
4. Verify all features work

---

## üîß **Troubleshooting**

### Common Issues:

**Database Connection Error:**

- Check `DATABASE_URL` format
- Ensure PostgreSQL is running (local)
- Verify Railway database service is active

**Email Not Sending:**

- Verify 2FA is enabled on Gmail
- Check App Password is correct (16 characters, no spaces)
- Ensure `EMAIL_USER` matches the Gmail account

**Build Failures:**

- Check all environment variables are set
- Verify no syntax errors in .env files
- Ensure Railway has PostgreSQL service added

**Frontend API Errors:**

- Update `FRONTEND_URL` in Railway
- Check Railway domain is correct
- Verify CORS settings

---

## ‚úÖ **Quick Checklist**

### Local Development:

- [ ] PostgreSQL installed and running
- [ ] `backend/.env` file created with all variables
- [ ] Gmail App Password generated
- [ ] Database migrations run
- [ ] Both frontend and backend start successfully

### Railway Production:

- [ ] Repository pushed to GitHub
- [ ] Railway project created
- [ ] PostgreSQL service added
- [ ] All environment variables set
- [ ] Gmail App Password configured
- [ ] Domain URL updated in variables
- [ ] Application deploys successfully

---

**Need help?** Check the logs in Railway dashboard or run `npm run dev` locally to see error messages.

Your RSSB Spiritual Platform is ready to serve the community! üôè‚ú®
